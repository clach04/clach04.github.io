<html>
<head>
    <title>colour Pebble App</title>
    <style>
        p {
            font-family:Arial;
            font-size:11pt;
        }

        h1 {
            font-family:Arial;
            font-size:20pt;
        }

        /* using http://www.bestcssbuttongenerator.com/ */
        .save_btn {
            background-color:#44c767;
            -moz-border-radius:28px;
            -webkit-border-radius:28px;
            border-radius:28px;
            border:1px solid #18ab29;
            display:inline-block;
            cursor:pointer;
            color:#ffffff;
            font-family:Arial;
            font-size:17px;
            padding:16px 31px;
            text-decoration:none;
            text-shadow:0px 1px 0px #2f6627;
        }
        .save_btn:hover {
            background-color:#5cbf2a;
        }
        .save_btn:active {
            position:relative;
            top:1px;
        }

    .cancel_btn {
        background-color:#ff0000;
        -moz-border-radius:28px;
        -webkit-border-radius:28px;
        border-radius:28px;
        border:1px solid #ab1934;
        display:inline-block;
        cursor:pointer;
        color:#ffffff;
        font-family:Arial;
        font-size:17px;
        padding:16px 31px;
        text-decoration:none;
        text-shadow:0px 1px 0px #662828;
    }
    .cancel_btn:hover {
        background-color:#bd2a2a;
    }
    .cancel_btn:active {
        position:relative;
        top:1px;
    }


    </style>
</head>

<body>
    <h1>Color Watch Face config:</h1>

    <!--
    <p>
        <button id="save_button" class="save_btn">Save</button>
        <button id="cancel_button" class="cancel_btn">Cancel</button>
    </p>
    -->

    <p>Time and Date color:
        <!--
            TODO use colors for background in selection option? May need to do this in javascript only
        -->
        <select id="time_color" name="time_color">
            <option value="AAFFAA">MintGreen</option>
            <option value="5500FF">ElectricUltramarine</option>
            <option value="FF0055">Folly</option>
            <option value="55FFFF">ElectricBlue</option>
            <option value="555500">ArmyGreen</option>
            <option value="0000AA">DukeBlue</option>
            <option value="5555FF">VeryLightBlue</option>
            <option value="00AAAA">TiffanyBlue</option>
            <option value="55AAFF">PictonBlue</option>
            <option value="5500AA">Indigo</option>
            <option value="AAFF00">SpringBud</option>
            <option value="55FF00">BrightGreen</option>
            <option value="000055">OxfordBlue</option>
            <option value="55AAAA">CadetBlue</option>
            <option value="AA5555">RoseVale</option>
            <option value="FF00AA">FashionMagenta</option>
            <option value="FFAAAA">Melon</option>
            <option value="AA0055">JazzberryJam</option>
            <option value="AA55AA">Purpureus</option>
            <option value="550055">ImperialPurple</option>
            <option value="005500">DarkGreen</option>
            <option value="0000FF">Blue</option>
            <option value="5555AA">Liberty</option>
            <option value="55AA00">KellyGreen</option>
            <option value="55AA55">MayGreen</option>
            <option value="AA00FF">VividViolet</option>
            <option value="FFAA55">Rajah</option>
            <option value="FF55AA">BrilliantRose</option>
            <option value="AAAAAA">LightGray</option>
            <option value="00AAFF">VividCerulean</option>
            <option value="550000">BulgarianRose</option>
            <option value="00FF00">Green</option>
            <option value="AA5500">WindsorTan</option>
            <option value="00AA55">JaegerGreen</option>
            <option value="555555">DarkGray</option>
            <option value="FF5500">Orange</option>
            <option value="0055FF">BlueMoon</option>
            <option value="000000">Black</option>
            <option value="00FFFF">Cyan</option>
            <option value="AA0000">DarkCandyAppleRed</option>
            <option value="AAAA00">Limerick</option>
            <option value="0055AA">CobaltBlue</option>
            <option value="FFFFAA">PastelYellow</option>
            <option value="FF55FF">ShockingPink</option>
            <option value="55FF55">ScreaminGreen</option>
            <option value="FF0000">Red</option>
            <option value="FFAA00">ChromeYellow</option>
            <option value="AA55FF">LavenderIndigo</option>
            <option value="AAFF55">Inchworm</option>
            <option value="00FF55">Malachite</option>
            <option value="55FFAA">MediumAquamarine</option>
            <option value="FFFF00">Yellow</option>
            <option value="FF00FF">Magenta</option>
            <option value="AAFFFF">Celeste</option>
            <option value="FFAAFF">RichBrilliantLavender</option>
            <option value="AAAAFF">BabyBlueEyes</option>
            <option value="005555">MidnightGreen</option>
            <option value="AA00AA">Purple</option>
            <option value="FFFFFF">White</option>
            <option value="00FFAA">MediumSpringGreen</option>
            <option value="FFFF55">Icterine</option>
            <option value="FF5555">SunsetOrange</option>
            <option value="AAAA55">Brass</option>
            <option value="00AA00">IslamicGreen</option>
        </select>
    </p>

    <!--
        <label>Vibrate on Bluetooth disconnect</label></td><td><input type="checkbox" name="vibrate_disconnect" id="vibrate_disconnect"/>
    -->
    <p>
        <label>Vibrate on Bluetooth disconnect:</label>
        <select id="vibrate_disconnect" name="vibrate_disconnect">
            <option value="off">Off</option>
            <option value="on">On</option>
        </select>
    </p>


    <p>
        <button id="save_button" class="save_btn">Save</button>
        <button id="cancel_button" class="cancel_btn">Cancel</button>
    </p>

</body>
</html>


<script>

    // Something like this to get query variables.
    function getQueryParam(variable, defaultValue) {
        // Find all URL parameters
        var query = location.search.substring(1);
        var vars = query.split('&');
        for (var i = 0; i < vars.length; i++) {
            var pair = vars[i].split('=');

            // If the query variable parameter is found, decode it to use and return it for use
            if (pair[0] === variable) {
                return decodeURIComponent(pair[1]);
            }
        }
        return defaultValue || false;
    }

    //Setup to allow easy adding more options later
    function saveOptions() {
        var v = document.getElementById("vibrate_disconnect");
        var e = document.getElementById("time_color");
        var hex_color_str = e.options[e.selectedIndex].value; // or text for display
        var options = {
            'color': hex_color_str,
            'vibrate_disconnect': v.value
        }
        return options;
    };



     document.getElementById("cancel_button").addEventListener('click',
        function () {
            console.log("Cancel");

            // Set the return URL depending on the runtime environment (emulator or Pebble Phone App)
            var return_to = getQueryParam('return_to', 'pebblejs://close#cancel');
            document.location.href = return_to;
        }
    , false);

    // TODO do this for all items with the same id (e.g. allow two save buttons, top and bottom of page
     document.getElementById("save_button").addEventListener('click',
        function () {
            console.log("Submit");
            var options = saveOptions();

            // Set the return URL depending on the runtime environment (emulator or Pebble Phone App)
            var return_to = getQueryParam('return_to', 'pebblejs://close#');
            document.location.href = return_to + encodeURIComponent(JSON.stringify(options));
        }
    , false);

    // TODO on ready...
    //document.getElementById("vibrate_disconnect").selectedIndex = 1; // works
    document.getElementById('vibrate_disconnect').value = getQueryParam('vibrate_disconnect', 'off');
    var time_color = getQueryParam('color', 'FFFFAA');
    document.getElementById('time_color').value = getQueryParam('time_color', time_color);

</script>
